{"mappings":"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","sources":["src/js/components/modal.js"],"sourcesContent":["import { refs } from '../refs/refs';\nimport { getGenresIdsList } from '../api/getGenresIdsList';\nimport { FetchApiMovies } from '../api/fetchMovies';\nimport { renderMoviesList } from '../templates/renderMovies';\nimport { load } from '../library/localStorage';\nimport { addToLibrary } from '../library/localStorage';\nimport { removeFromLibrary } from '../library/localStorage';\nimport { getAllLibraryMovies } from '../library/helper';\nimport { Loader } from './loader';\n\nconst loader = new Loader();\nconst fetchApiMovies = new FetchApiMovies();\n\nexport function addToggleModal() {\n  const refsModal = {\n    modalOpen: document.querySelectorAll('[data-modal-open]'),\n    modalClose: document.querySelector('[data-modal-close]'),\n    modalBackdrop: document.querySelector('.modal-movie__backdrop'),\n  };\n\n  function addModalListener() {\n    refsModal.modalBackdrop.classList.remove(\n      'modal-movie__backdrop--is-hidden'\n    );\n    window.addEventListener('keydown', onEscKeyPress);\n    // loader.on();\n  }\n\n  function removeModalListener() {\n    refsModal.modalBackdrop.classList.add('modal-movie__backdrop--is-hidden');\n  }\n\n  function onBackdropClick(event) {\n    if (event.target != event.currentTarget) {\n      return;\n    }\n    removeModalListener();\n  }\n\n  function onEscKeyPress(event) {\n    if (event.code === 'Escape') {\n      removeModalListener();\n    }\n  }\n\n  refsModal.modalOpen.forEach(modal => {\n    modal.addEventListener('click', addModalListener);\n  });\n\n  refsModal.modalClose.addEventListener('click', removeModalListener);\n\n  refsModal.modalBackdrop.addEventListener('click', onBackdropClick);\n}\n\nconst modalMoviePoster = document.querySelector('.modal-movie__poster--img');\n\nconst modalMovieTitle = document.querySelector('.modal-movie__title');\n\nconst modalMovieVote = document.querySelector('.modal-movie__vote');\nconst modalMovieVotes = document.querySelector('.modal-movie__votes');\nconst modalMoviePopularity = document.querySelector('.modal-movie__popularity');\nconst modalMovieOriginalTitle = document.querySelector(\n  '.modal-movie__original-title'\n);\nconst modalMovieGenre = document.querySelector('.modal-movie__genre');\n\nconst modalMovieDescription = document.querySelector('.modal-movie__text');\n\nconst modalMovieButtonWatched = document.querySelector(\n  '.modal-movie__button--watched'\n);\nconst modalMovieButtonQueued = document.querySelector(\n  '.modal-movie__button--queue'\n);\n\nconst createModalMovie = document.querySelectorAll('.movie-card__item');\n\ncreateModalMovie.forEach(movie => {\n  movie.addEventListener('click', event => {\n    modalMoviePoster.src = '';\n    modalMovieTitle.innerHTML = '';\n    modalMovieVote.innerHTML = '';\n    modalMovieVotes.innerHTML = '';\n    modalMoviePopularity.innerHTML = '';\n    modalMovieOriginalTitle.innerHTML = '';\n    modalMovieGenre.innerHTML = '';\n    modalMovieDescription.innerHTML = '';\n\n    modalMovieButtonWatched.dataset.id = '';\n    modalMovieButtonQueued.dataset.id = '';\n\n    event.preventDefault();\n\n    const movieId = movie.dataset.id;\n    const movieData = getMovieDetails(movieId);\n\n    MovieModalMurkup(movieData);\n    loader.off();\n  });\n\n  //----------DODAĆ DO BIBLIOTEKI UŻYTKOWNIKA------------//\n  const movieDetails = FetchApiMovies.getMovieDetails(id);\n  console.log(movieDetails);\n  let onWatched = false;\n  let onQueue = false;\n\n  load('watchedList')?.forEach(movie => {\n    if (movie.id == id) {\n      onWatched = true;\n    }\n  });\n\n  load('queueList')?.forEach(movie => {\n    if (movie.id == id) {\n      onQueue = true;\n    }\n  });\n\n  let watchedBtn = document.querySelector('modal-movie__button--watched');\n  let queueBtn = document.querySelector('modal-movie__button--queue');\n\n  if (onWatched) {\n    watchedBtn.innerHTML = 'On List';\n  }\n  if (onQueue) {\n    queueBtn.innerHTML = 'On List';\n  }\n\n  const checkIfOnList = (button, listType, listTypeText) => {\n    let watched;\n    if (listTypeText == undefined) return;\n    if (listTypeText === 'watched') {\n      watched = onWatched;\n    } else if (listTypeText === 'queue') {\n      watched = onQueue;\n    }\n    if (watched) {\n      removeFromLibrary(id, listType);\n      button.innerHTML = `Add to ${listTypeText}`;\n    } else {\n      addToLibrary(id, listType);\n      button.innerHTML = `Added`;\n    }\n    if (listTypeText === 'watched') {\n      onWatched = !onWatched;\n    } else if (listTypeText === 'queue') {\n      onQueue = !onQueue;\n    }\n  };\n\n  watchedBtn.addEventListener('click', () => {\n    checkIfOnList(watchedBtn, 'watchedList', 'watched');\n    if (\n      document.location.href.includes('library') &&\n      refs.moviesList.dataset.listtype === 'watched'\n    ) {\n      let tempLibraryList = load('watchedList');\n      getAllLibraryMovies(tempLibraryList, 'watchedList');\n    }\n  });\n  queueBtn.addEventListener('click', () => {\n    checkIfOnList(queueBtn, 'queueList', 'queue');\n    if (\n      document.location.href.includes('library') &&\n      refs.moviesList.dataset.listtype === 'queue'\n    ) {\n      let tempLibraryList = load('queueList');\n      getAllLibraryMovies(tempLibraryList, 'queueList');\n    }\n  });\n\n  //--------------------------------------------------------------------//\n});\n\nfunction MovieModalMurkup({\n  id,\n  poster_path,\n  title,\n  original_title,\n  popularity,\n  overview,\n  genres,\n  vote_average,\n  vote_count,\n}) {\n  return;\n  modalMoviePoster.src = `https://image.tmdb.org/t/p/w500${movie.poster_path}`;\n  modalMovieTitle.innerHTML = `${movie.title}`;\n  modalMovieVote.innerHTML = `${movie.vote_average}`;\n  modalMovieVotes.innerHTML = `${movie.vote_count}`;\n  modalMoviePopularity.innerHTML = `${movie.popularity}`;\n  modalMovieOriginalTitle.innerHTML = `${movie.original_title}`;\n  modalMovieGenre.innerHTML = `${movie.genres\n    .map(genre => genre.name)\n    .join(', ')}`;\n  modalMovieDescription.innerHTML = `${movie.overview}`;\n\n  modalMovieButtonWatched.dataset.id = movie.id;\n  modalMovieButtonQueued.dataset.id = movie.id;\n}\n"],"names":["$cqmI4","parcelRequire","$644ae9dfa4ed5fd0$var$loader","Loader","$lfqeF","FetchApiMovies","$644ae9dfa4ed5fd0$export$58a2b242c2da4af2","refsModal","modalOpen","document","querySelectorAll","modalClose","querySelector","modalBackdrop","addModalListener","classList","remove","window","addEventListener","onEscKeyPress","removeModalListener","add","event","code","forEach","modal","target","currentTarget","$644ae9dfa4ed5fd0$var$modalMoviePoster","$644ae9dfa4ed5fd0$var$modalMovieTitle","$644ae9dfa4ed5fd0$var$modalMovieVote","$644ae9dfa4ed5fd0$var$modalMovieVotes","$644ae9dfa4ed5fd0$var$modalMoviePopularity","$644ae9dfa4ed5fd0$var$modalMovieOriginalTitle","$644ae9dfa4ed5fd0$var$modalMovieGenre","$644ae9dfa4ed5fd0$var$modalMovieDescription","$644ae9dfa4ed5fd0$var$modalMovieButtonWatched","$644ae9dfa4ed5fd0$var$modalMovieButtonQueued","movie","ref","ref1","src","innerHTML","dataset","id","preventDefault","movieId","param","poster_path","title","original_title","popularity","overview","genres","vote_average","vote_count","$644ae9dfa4ed5fd0$var$MovieModalMurkup","getMovieDetails","off","movieDetails","console","log","onWatched","onQueue","$6kpMs","load","watchedBtn","queueBtn","checkIfOnList","button","listType","listTypeText","watched","undefined","removeFromLibrary","concat","addToLibrary","location","href","includes","refs","moviesList","listtype","tempLibraryList","$e07ZM","getAllLibraryMovies"],"version":3,"file":"library.82513a59.js.map"}