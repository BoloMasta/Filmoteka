{"mappings":"gfAAAA,EAAA,S,sBAAA,I,wBAEuB,IAAI,EAAAC,EAAAC,e","sources":["src/js/components/pagination.js"],"sourcesContent":["import { refs } from '../refs/refs';\nimport { FetchApiMovies } from '../api/fetchMovies';\nconst fetchApiMovies = new FetchApiMovies();\nimport { showTrendingMovies } from '../../index.js';\n\nexport async function setPagination(page) {\n  const response = await fetchApiMovies.getTrending(page);\n  const totalNumberOfPages = await response.total_pages;\n  let currentPage = await response.page;\n  let paginationMArkup = '';\n\n  for (let i = 1; i <= totalNumberOfPages; i += 1) {\n    if (\n      i == 1 ||\n      i == totalNumberOfPages ||\n      i == currentPage ||\n      (i > currentPage && i <= currentPage + 2) ||\n      (i < currentPage && i >= currentPage - 2)||\n      (currentPage == 1 && totalNumberOfPages > 4 && i < 8)||\n      (currentPage == 2 && totalNumberOfPages > 5 && i < 8)||\n      (currentPage == 3 && totalNumberOfPages > 6 && i < 8)||\n      (currentPage == 4 && totalNumberOfPages > 7 && i < 7)||\n      (currentPage == totalNumberOfPages && totalNumberOfPages > 7 && i > totalNumberOfPages -7)||\n      (currentPage == totalNumberOfPages -1 && totalNumberOfPages > 7 && i > totalNumberOfPages -7)||\n      (currentPage == totalNumberOfPages -2 && totalNumberOfPages > 7 && i > totalNumberOfPages -7)\n      ) {\n      paginationMArkup += `<button class=\"pagination-container__button\" data-id=\"${i}\">${i}</button>`;\n    }\n  }\n\n  refs.paginationContainer.innerHTML = paginationMArkup;\n  const paginationButtons = document.querySelectorAll(\n    '.pagination-numbers button'\n  );\n\n  if(totalNumberOfPages > 1) {\n    refs.prevButton.removeAttribute(\"hidden\");\n    refs.nextButton.removeAttribute(\"hidden\");\n  }\n  function createDotsbuttons () {\n\n    const firstDotButtonLocation = document.querySelector('button[data-id=\"1\"]');\n    const lastDotButtonLocation = document.querySelector(`button[data-id=\"${totalNumberOfPages}\"`)\n    const firstDotButton = document.createElement(\"button\");\n    firstDotButton.textContent = \"...\";\n    firstDotButton.classList.add(\"pagination-container__first-dot-button\");\n    const lastDotButton = document.createElement(\"button\");\n    lastDotButton.textContent = \"...\";\n    lastDotButton.classList.add(\"pagination-container__last-dot-button\");\n\n    if(currentPage > 3) {\n      firstDotButtonLocation.after(firstDotButton);\n    }\n\n   if(currentPage <= totalNumberOfPages -3)\n    lastDotButtonLocation.before(lastDotButton);\n  }\n  createDotsbuttons();\n\n  handleActiveButton = () => {\n    paginationButtons.forEach(button => {\n      button.classList.remove('pagination-container__button--active');\n      let pageIndex = button.textContent;\n      if (pageIndex == currentPage) {\n        button.classList.add('pagination-container__button--active');\n      }\n    });\n  };\n\n  const disableButton = button => {\n    button.classList.add('disabled');\n    button.setAttribute('disabled', true);\n  };\n\n  const enableButton = button => {\n    button.classList.remove('disabled');\n    button.removeAttribute('disabled');\n  };\n\n  refs.nextButton.addEventListener('click', () => {\n    currentPage++;\n    showTrendingMovies(currentPage);\n  });\n\n  refs.prevButton.addEventListener('click', () => {\n    currentPage--;\n    showTrendingMovies(currentPage);\n  });\n\n  if (currentPage == 1) {\n    disableButton(refs.prevButton);\n    refs.prevButton.style.opacity = \"0.4\";\n  } else {\n    enableButton(refs.prevButton);\n    refs.prevButton.style.opacity = \"1\";\n  }\n\n  if (currentPage == totalNumberOfPages) {\n    disableButton(refs.nextButton);\n    refs.nextButton.style.opacity = \"0.4\";\n  } else {\n    enableButton(refs.nextButton);\n    refs.nextButton.style.opacity = \"1\";\n  }\n\n  handleActiveButton();\n\n  paginationButtons.forEach(button => {\n    button.addEventListener('click', event => {\n      const pageNumber = event.target.textContent;\n      console.log(pageNumber);\n      showTrendingMovies(pageNumber);\n    });\n  });\n}\n"],"names":["parcelRequire","$lfqeF","FetchApiMovies"],"version":3,"file":"library.4edb9915.js.map"}