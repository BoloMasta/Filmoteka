{"mappings":"+oBAAA,IAAAA,EAAAC,EAAA,S,+FAWO,SAASC,IACd,MAAMC,EAAY,CAChBC,WAAYC,SAASC,cAAc,sBACnCC,UAAWF,SAASC,cAAc,2BAGpC,SAASE,IACPL,EAAUI,UAAUE,UAAUC,OAAO,mCACvC,CAEAL,SAASM,iBAAiB,qBAAqBC,SAAQC,IACrDA,EAAMC,iBAAiB,QAASN,EAAA,IAGlCL,EAAUC,WAAWU,iBAAiB,QAASN,EAOjD,C,WAGA,MAAMO,EAAmBV,SAASC,cAAc,6BAE1CU,EAAkBX,SAASC,cAAc,uBAEzCW,EAAiBZ,SAASC,cAAc,sBACxCY,EAAkBb,SAASC,cAAc,uBACzCa,EAAuBd,SAASC,cAAc,4BAC9Cc,EAA0Bf,SAASC,cAAc,gCACjDe,EAAkBhB,SAASC,cAAc,uBAEzCgB,EAAwBjB,SAASC,cAAc,sBAE/CiB,EAA0BlB,SAASC,cAAc,iCACjDkB,EAAyBnB,SAASC,cAAc,+BAI7BD,SAASM,iBAAiB,qBAElCC,SAASa,I,IA8BxBC,EAMAC,EAnCEF,EAAMX,iBAAiB,SAASc,IAExBb,EAAiBc,IAAM,GACvBb,EAAgBc,UAAY,GAC5Bb,EAAea,UAAY,GAC3BZ,EAAgBY,UAAY,GAC5BX,EAAqBW,UAAY,GACjCV,EAAwBU,UAAY,GACpCT,EAAgBS,UAAY,GAC5BR,EAAsBQ,UAAY,GAElCP,EAAwBQ,QAAQC,GAAK,GACrCR,EAAuBO,QAAQC,GAAK,GAE1CJ,EAAMK,iBAEN,MAAMC,EAAUT,EAAMM,QAAQC,GACZG,gBAAgBD,EAEjB,IAKrB,MAAME,EAAeC,EAAAC,eAAeH,gBAAgBH,IACpDO,QAAQC,IAAIJ,GACZ,IAAIK,GAAY,EACZC,GAAU,EAET,QAALhB,GAAA,EAAAiB,EAAAC,MAAK,sBAAL,IAAAlB,KAAqBd,SAAQa,IACvBA,EAAMO,IAAMA,KACdS,GAAY,EAAI,IAIf,QAALd,GAAA,EAAAgB,EAAAC,MAAK,oBAAL,IAAAjB,KAAmBf,SAAQa,IACrBA,EAAMO,IAAMA,KACdU,GAAU,EAAI,IAIjB,IAAIG,EAAaxC,SAASC,cAAc,gCACpCwC,EAAWzC,SAASC,cAAc,8BAEnCmC,IACFI,EAAWf,UAAY,WAErBY,IACFI,EAAShB,UAAY,WAGvB,MAAMiB,EAAgB,CAACC,EAAQC,EAAUC,KACvC,IAAIC,EACgBC,MAAhBF,IACiB,YAAjBA,EACFC,EAAUV,EACgB,UAAjBS,IACTC,EAAUT,GAERS,IACF,EAAAR,EAAAU,mBAAkBrB,GAAIiB,GACtBD,EAAOlB,UAAY,UAAUoB,OAE7B,EAAAP,EAAAW,cAAatB,GAAIiB,GACjBD,EAAOlB,UAAY,SAEA,YAAjBoB,EACFT,GAAaA,EACa,UAAjBS,IACTR,GAAWA,GAAA,EAMfG,EAAW/B,iBAAiB,SAAS,KAEnC,GADAiC,EAAcF,EAAY,cAAe,WAEvCxC,SAASkD,SAASC,KAAKC,SAAS,YACK,YAArCzD,EAAA0D,KAAKC,WAAW5B,QAAQ6B,SACxB,CACA,IAAIC,GAAkB,EAAAlB,EAAAC,MAAK,gBAC3B,EAAAkB,EAAAC,qBAAoBF,EAAiB,cACvC,KAEFf,EAAShC,iBAAiB,SAAS,KAEjC,GADAiC,EAAcD,EAAU,YAAa,SAEnCzC,SAASkD,SAASC,KAAKC,SAAS,YACK,UAArCzD,EAAA0D,KAAKC,WAAW5B,QAAQ6B,SACxB,CACA,IAAIC,GAAkB,EAAAlB,EAAAC,MAAK,cAC3B,EAAAkB,EAAAC,qBAAoBF,EAAiB,YACvC,IACF,G","sources":["src/js/components/modal.js"],"sourcesContent":["import { refs } from '../refs/refs';\nimport { getGenresIdsList } from '../api/getGenresIdsList';\nimport { FetchApiMovies } from '../api/fetchMovies';\nimport { renderMoviesList } from '../templates/renderMovies';\nimport { load } from '../library/localStorage';\nimport { addToLibrary } from '../library/localStorage';\nimport { removeFromLibrary } from '../library/localStorage';\nimport { getAllLibraryMovies } from '../library/helper';\nimport { Loader } from './loader';\n\n\nexport function addToggleModal() {\n  const refsModal = {\n    modalClose: document.querySelector('[data-modal-close]'),\n    modalData: document.querySelector('.modal-movie__backdrop'),\n  };\n\n  function toggleModal() {\n    refsModal.modalData.classList.toggle('modal-movie__backdrop--is-hidden');\n  }\n\n  document.querySelectorAll('[data-modal-open]').forEach(modal => {\n    modal.addEventListener('click', toggleModal);\n  });\n\n  refsModal.modalClose.addEventListener('click', toggleModal);\n\n//   refsModal.modalClose.addEventListener('keydown', function (event) {\n//   if (event.key === 'Escape') {\n//     refsModal.modalClose.classList.add('modal-movie__backdrop--is-hidden');\n//   }\n// });\n}\n\n\nconst modalMoviePoster = document.querySelector('.modal-movie__poster--img');\n\nconst modalMovieTitle = document.querySelector('.modal-movie__title');\n\nconst modalMovieVote = document.querySelector('.modal-movie__vote');\nconst modalMovieVotes = document.querySelector('.modal-movie__votes');\nconst modalMoviePopularity = document.querySelector('.modal-movie__popularity');\nconst modalMovieOriginalTitle = document.querySelector('.modal-movie__original-title');\nconst modalMovieGenre = document.querySelector('.modal-movie__genre');\n\nconst modalMovieDescription = document.querySelector('.modal-movie__text');\n\nconst modalMovieButtonWatched = document.querySelector('.modal-movie__button--watched');\nconst modalMovieButtonQueued = document.querySelector('.modal-movie__button--queue');\n\n\n\nconst createModalMovie = document.querySelectorAll('.movie-card__item');\n\ncreateModalMovie.forEach (movie => {\n    movie.addEventListener('click', event => {\n\n            modalMoviePoster.src = '';\n            modalMovieTitle.innerHTML = '';\n            modalMovieVote.innerHTML = '';\n            modalMovieVotes.innerHTML = '';\n            modalMoviePopularity.innerHTML = '';\n            modalMovieOriginalTitle.innerHTML = '';\n            modalMovieGenre.innerHTML = '';\n            modalMovieDescription.innerHTML = '';\n\n            modalMovieButtonWatched.dataset.id = '';\n            modalMovieButtonQueued.dataset.id = '';\n\n      event.preventDefault();\n\n      const movieId = movie.dataset.id;\n      const movieData = getMovieDetails(movieId);\n      \n      MovieModalMurkup(movieData);\n    });\n  \n  \n  //----------DODAĆ DO BIBLIOTEKI UŻYTKOWNIKA------------//\n  const movieDetails = FetchApiMovies.getMovieDetails(id);\n  console.log(movieDetails);\n  let onWatched = false;\n  let onQueue = false;\n  \n  load('watchedList')?.forEach(movie => {\n    if (movie.id == id) {\n      onWatched = true;\n    }\n  });\n  \n  load('queueList')?.forEach(movie => {\n    if (movie.id == id) {\n      onQueue = true;\n    }\n  });\n  \n   let watchedBtn = document.querySelector('modal-movie__button--watched');\n   let queueBtn = document.querySelector('modal-movie__button--queue');\n\n  if (onWatched) {\n    watchedBtn.innerHTML = 'On List';\n  }\n  if (onQueue) {\n    queueBtn.innerHTML = 'On List';\n  }\n\n  const checkIfOnList = (button, listType, listTypeText) => {\n    let watched;\n    if (listTypeText == undefined) return;\n    if (listTypeText === 'watched') {\n      watched = onWatched;\n    } else if (listTypeText === 'queue') {\n      watched = onQueue;\n    }\n    if (watched) {\n      removeFromLibrary(id, listType);\n      button.innerHTML = `Add to ${listTypeText}`;\n    } else {\n      addToLibrary(id, listType);\n      button.innerHTML = `Added`;\n    }\n    if (listTypeText === 'watched') {\n      onWatched = !onWatched;\n    } else if (listTypeText === 'queue') {\n      onQueue = !onQueue;\n    }\n  };\n\n\n\n  watchedBtn.addEventListener('click', () => {\n    checkIfOnList(watchedBtn, 'watchedList', 'watched');\n    if (\n      document.location.href.includes('library') &&\n      refs.moviesList.dataset.listtype === 'watched'\n    ) {\n      let tempLibraryList = load('watchedList');\n      getAllLibraryMovies(tempLibraryList, 'watchedList');\n    }\n  });\n  queueBtn.addEventListener('click', () => {\n    checkIfOnList(queueBtn, 'queueList', 'queue');\n    if (\n      document.location.href.includes('library') &&\n      refs.moviesList.dataset.listtype === 'queue'\n    ) {\n      let tempLibraryList = load('queueList');\n      getAllLibraryMovies(tempLibraryList, 'queueList');\n    }\n  });\n\n//--------------------------------------------------------------------//\n\n  })\n  \n\n  function MovieModalMurkup ({id, poster_path, title, original_title, popularity, overview, genres, vote_average, vote_count,}) {\n    return\n        modalMoviePoster.src=`https://image.tmdb.org/t/p/w500${movie.poster_path}`;\n        modalMovieTitle.innerHTML = `${movie.title}`;\n        modalMovieVote.innerHTML = `${movie.vote_average}`;\n        modalMovieVotes.innerHTML = `${movie.vote_count}`;\n        modalMoviePopularity.innerHTML = `${movie.popularity}`;\n        modalMovieOriginalTitle.innerHTML = `${movie.original_title}`;\n        modalMovieGenre.innerHTML = `${movie.genres.map(genre => genre.name).join(', ')}`;\n        modalMovieDescription.innerHTML = `${movie.overview}`;\n  \n        modalMovieButtonWatched.dataset.id = movie.id;\n        modalMovieButtonQueued.dataset.id = movie.id;\n  };\n\n\n\n"],"names":["$3ILHO","parcelRequire","$65a0cd66e497f444$export$58a2b242c2da4af2","refsModal","modalClose","document","querySelector","modalData","toggleModal","classList","toggle","querySelectorAll","forEach","modal","addEventListener","$65a0cd66e497f444$var$modalMoviePoster","$65a0cd66e497f444$var$modalMovieTitle","$65a0cd66e497f444$var$modalMovieVote","$65a0cd66e497f444$var$modalMovieVotes","$65a0cd66e497f444$var$modalMoviePopularity","$65a0cd66e497f444$var$modalMovieOriginalTitle","$65a0cd66e497f444$var$modalMovieGenre","$65a0cd66e497f444$var$modalMovieDescription","$65a0cd66e497f444$var$modalMovieButtonWatched","$65a0cd66e497f444$var$modalMovieButtonQueued","movie","ref","ref1","event","src","innerHTML","dataset","id","preventDefault","movieId","getMovieDetails","movieDetails","$gIXsy","FetchApiMovies","console","log","onWatched","onQueue","$31AGq","load","watchedBtn","queueBtn","checkIfOnList","button","listType","listTypeText","watched","undefined","removeFromLibrary","addToLibrary","location","href","includes","refs","moviesList","listtype","tempLibraryList","$dd0jq","getAllLibraryMovies"],"version":3,"file":"library.f832046e.js.map"}