{"mappings":"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","sources":["src/js/components/modal.js"],"sourcesContent":["import { refs } from '../refs/refs';\nimport { getGenresIdsList } from '../api/getGenresIdsList';\nimport { FetchApiMovies } from '../api/fetchMovies';\nimport { renderMoviesList } from '../templates/renderMovies';\nimport { load } from '../library/localStorage';\nimport { addToLibrary } from '../library/localStorage';\nimport { removeFromLibrary } from '../library/localStorage';\nimport { getAllLibraryMovies } from '../library/helper';\nimport { Loader } from './loader';\n\nconst loader = new Loader();\nconst fetchApiMovies = new FetchApiMovies();\n\nexport function addToggleModal() {\n  const refsModal = {\n    modalOpen: document.querySelectorAll('[data-modal-open]'),\n    modalClose: document.querySelector('[data-modal-close]'),\n    modalBackdrop: document.querySelector('.modal-movie__backdrop'),\n  };\n\n  function addModalListener() {\n    refsModal.modalBackdrop.classList.remove(\n      'modal-movie__backdrop--is-hidden'\n    );\n    window.addEventListener('keydown', onEscKeyPress);\n    // loader.on();\n  }\n\n  function removeModalListener() {\n    refsModal.modalBackdrop.classList.add('modal-movie__backdrop--is-hidden');\n  }\n\n  function onBackdropClick(event) {\n    if (event.target != event.currentTarget) {\n      return;\n    }\n    removeModalListener();\n  }\n\n  function onEscKeyPress(event) {\n    if (event.code === 'Escape') {\n      removeModalListener();\n    }\n  }\n\n  refsModal.modalOpen.forEach(modal => {\n    modal.addEventListener('click', addModalListener);\n  });\n\n  refsModal.modalClose.addEventListener('click', removeModalListener);\n\n  refsModal.modalBackdrop.addEventListener('click', onBackdropClick);\n}\n\nconst modalMoviePoster = document.querySelector('.modal-movie__poster--img');\n\nconst modalMovieTitle = document.querySelector('.modal-movie__title');\n\nconst modalMovieVote = document.querySelector('.modal-movie__vote');\nconst modalMovieVotes = document.querySelector('.modal-movie__votes');\nconst modalMoviePopularity = document.querySelector('.modal-movie__popularity');\nconst modalMovieOriginalTitle = document.querySelector(\n  '.modal-movie__original-title'\n);\nconst modalMovieGenre = document.querySelector('.modal-movie__genre');\n\nconst modalMovieDescription = document.querySelector('.modal-movie__text');\n\nconst modalMovieButtonWatched = document.querySelector(\n  '.modal-movie__button--watched'\n);\nconst modalMovieButtonQueued = document.querySelector(\n  '.modal-movie__button--queue'\n);\n\nconst createModalMovie = document.querySelectorAll('.movie-card__item');\n\ncreateModalMovie.forEach(movie => {\n  movie.addEventListener('click', event => {\n    modalMoviePoster.src = '';\n    modalMovieTitle.innerHTML = '';\n    modalMovieVote.innerHTML = '';\n    modalMovieVotes.innerHTML = '';\n    modalMoviePopularity.innerHTML = '';\n    modalMovieOriginalTitle.innerHTML = '';\n    modalMovieGenre.innerHTML = '';\n    modalMovieDescription.innerHTML = '';\n\n    modalMovieButtonWatched.dataset.id = '';\n    modalMovieButtonQueued.dataset.id = '';\n\n    event.preventDefault();\n\n    const movieId = movie.dataset.id;\n    const movieData = getMovieDetails(movieId);\n\n    MovieModalMurkup(movieData);\n    loader.off();\n  });\n\n  //----------DODAĆ DO BIBLIOTEKI UŻYTKOWNIKA------------//\n  const movieDetails = FetchApiMovies.getMovieDetails(id);\n  console.log(movieDetails);\n  let onWatched = false;\n  let onQueue = false;\n\n  load('watchedList')?.forEach(movie => {\n    if (movie.id == id) {\n      onWatched = true;\n    }\n  });\n\n  load('queueList')?.forEach(movie => {\n    if (movie.id == id) {\n      onQueue = true;\n    }\n  });\n\n  let watchedBtn = document.querySelector('modal-movie__button--watched');\n  let queueBtn = document.querySelector('modal-movie__button--queue');\n\n  if (onWatched) {\n    watchedBtn.innerHTML = 'On List';\n  }\n  if (onQueue) {\n    queueBtn.innerHTML = 'On List';\n  }\n\n  const checkIfOnList = (button, listType, listTypeText) => {\n    let watched;\n    if (listTypeText == undefined) return;\n    if (listTypeText === 'watched') {\n      watched = onWatched;\n    } else if (listTypeText === 'queue') {\n      watched = onQueue;\n    }\n    if (watched) {\n      removeFromLibrary(id, listType);\n      button.innerHTML = `Add to ${listTypeText}`;\n    } else {\n      addToLibrary(id, listType);\n      button.innerHTML = `Added`;\n    }\n    if (listTypeText === 'watched') {\n      onWatched = !onWatched;\n    } else if (listTypeText === 'queue') {\n      onQueue = !onQueue;\n    }\n  };\n\n  watchedBtn.addEventListener('click', () => {\n    checkIfOnList(watchedBtn, 'watchedList', 'watched');\n    if (\n      document.location.href.includes('library') &&\n      refs.moviesList.dataset.listtype === 'watched'\n    ) {\n      let tempLibraryList = load('watchedList');\n      getAllLibraryMovies(tempLibraryList, 'watchedList');\n    }\n  });\n  queueBtn.addEventListener('click', () => {\n    checkIfOnList(queueBtn, 'queueList', 'queue');\n    if (\n      document.location.href.includes('library') &&\n      refs.moviesList.dataset.listtype === 'queue'\n    ) {\n      let tempLibraryList = load('queueList');\n      getAllLibraryMovies(tempLibraryList, 'queueList');\n    }\n  });\n\n  //--------------------------------------------------------------------//\n});\n\nfunction MovieModalMurkup({\n  id,\n  poster_path,\n  title,\n  original_title,\n  popularity,\n  overview,\n  genres,\n  vote_average,\n  vote_count,\n}) {\n  return;\n  modalMoviePoster.src = `https://image.tmdb.org/t/p/w500${movie.poster_path}`;\n  modalMovieTitle.innerHTML = `${movie.title}`;\n  modalMovieVote.innerHTML = `${movie.vote_average}`;\n  modalMovieVotes.innerHTML = `${movie.vote_count}`;\n  modalMoviePopularity.innerHTML = `${movie.popularity}`;\n  modalMovieOriginalTitle.innerHTML = `${movie.original_title}`;\n  modalMovieGenre.innerHTML = `${movie.genres\n    .map(genre => genre.name)\n    .join(', ')}`;\n  modalMovieDescription.innerHTML = `${movie.overview}`;\n\n  modalMovieButtonWatched.dataset.id = movie.id;\n  modalMovieButtonQueued.dataset.id = movie.id;\n}\n"],"names":["$3ILHO","parcelRequire","$65a0cd66e497f444$var$loader","Loader","$gIXsy","FetchApiMovies","$65a0cd66e497f444$export$58a2b242c2da4af2","refsModal","modalOpen","document","querySelectorAll","modalClose","querySelector","modalBackdrop","addModalListener","classList","remove","window","addEventListener","onEscKeyPress","removeModalListener","add","event","code","forEach","modal","target","currentTarget","$65a0cd66e497f444$var$modalMoviePoster","$65a0cd66e497f444$var$modalMovieTitle","$65a0cd66e497f444$var$modalMovieVote","$65a0cd66e497f444$var$modalMovieVotes","$65a0cd66e497f444$var$modalMoviePopularity","$65a0cd66e497f444$var$modalMovieOriginalTitle","$65a0cd66e497f444$var$modalMovieGenre","$65a0cd66e497f444$var$modalMovieDescription","$65a0cd66e497f444$var$modalMovieButtonWatched","$65a0cd66e497f444$var$modalMovieButtonQueued","movie","ref","ref1","src","innerHTML","dataset","id","preventDefault","movieId","getMovieDetails","off","movieDetails","console","log","onWatched","onQueue","$31AGq","load","watchedBtn","queueBtn","checkIfOnList","button","listType","listTypeText","watched","undefined","removeFromLibrary","addToLibrary","location","href","includes","refs","moviesList","listtype","tempLibraryList","$dd0jq","getAllLibraryMovies"],"version":3,"file":"library.5b027d5d.js.map"}